# Reference from template-project â€” not active, kept for GitHub Actions migration reference
name: "CI/CD Pipeline for Fund A Scholar Data - Test Environment"

trigger:
  branches:
    include:
      - dev

parameters:
  - name: environment
    displayName: Select the environment
    type: string
    default: dev
    values:
      - dev

variables:
  - ${{ if eq(parameters.environment, 'dev') }}:
      - group: dev
      - name: environment
        value: dev

stages:
  - template: templates/deploy-full-stack.yml
    parameters:
      environment: $(environment)
      branch: dev
      awsAccessKeyId: $(AWS_ACCESS_KEY_ID)
      awsSecretAccessKey: $(AWS_SECRET_ACCESS_KEY)
      awsRegion: $(AWS_REGION)
      stripeSecretKey: $(STRIPE_SECRET_KEY)
      stripePublishableKey: $(STRIPE_PUBLISHABLE_KEY)
      stripeWebhookSecret: $(STRIPE_WEBHOOK_SECRET)
      originDataAWSRegion: $(ORIGIN_DATA_AWS_REGION)
      originDataAWSAccessKeyId: $(ORIGIN_DATA_AWS_ACCESS_KEY_ID)
      originDataAWSSecretAccessKey: $(ORIGIN_DATA_AWS_SECRET_ACCESS_KEY)
      originDataS3BucketName: $(ORIGIN_DATA_S3_BUCKET_NAME)
      requiresAuth: $(NEXT_REQUIRES_AUTH)
      artilleryKey: $(ARTILLERY_KEY)
      internalVpcConfig: $(INTERNAL_VPC_CONFIG)
      existingDatabaseSecretArn: $(EXISTING_DATABASE_SECRET_ARN)
      internalAppsProxyConfig: $(INTERNAL_APPS_PROXY_CONFIG)
      campaignStartDate: $(CAMPAIGN_START_DATE)
      campaignEndDate: $(CAMPAIGN_END_DATE)
      endOfCampaign: $(END_OF_CAMPAIGN)